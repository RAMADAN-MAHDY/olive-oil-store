<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>زيت الذهب الأخضر - أفضل زيت زيتون طبيعي</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>

<body class="font-Cairo bg-white text-gray-800 antialiased">
    <!-- Header -->
    <header class="bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-4 fixed w-full top-0 z-40 shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="text-2xl font-extrabold flex items-center gap-2">
                    🫒 زيت الذهب الأخضر
                </div>
                <!-- Hamburger button for mobile -->
                <button id="navbar-toggle" class="md:hidden text-3xl focus:outline-none" aria-label="فتح القائمة">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
                <!-- Navbar links -->
                <nav>
                    <ul id="navbar-menu" class="hidden md:flex gap-8 list-none">
                        <li><a href="#home"
                                class="flex items-center gap-1 text-white hover:text-yellow-300 transition-all duration-300"><span>🏠</span>الرئيسية</a>
                        </li>
                        <li><a href="#features"
                                class="flex items-center gap-1 text-white hover:text-yellow-300 transition-all duration-300"><span>✨</span>المميزات</a>
                        </li>
                        <li><a href="#product"
                                class="flex items-center gap-1 text-white hover:text-yellow-300 transition-all duration-300"><span>🫒</span>المنتج</a>
                        </li>
                        <li><a href="#testimonials"
                                class="flex items-center gap-1 text-white hover:text-yellow-300 transition-all duration-300"><span>💬</span>آراء
                                العملاء</a></li>
                        <li><a href="#order"
                                class="flex items-center gap-1 text-white hover:text-yellow-300 transition-all duration-300"><span>🛒</span>اطلب
                                الآن</a></li>
                    </ul>
                    <!-- Mobile menu -->
                    <div id="mobile-menu"
                        class="fixed top-0 right-0 h-full w-4/5 max-w-xs bg-white bg-opacity-90 backdrop-blur-lg shadow-2xl rounded-l-3xl z-50 flex flex-col items-end pr-8 pt-8 space-y-6 text-right text-lg font-bold transform translate-x-full transition-transform duration-300 ease-in-out">
                        <div class="flex items-center justify-between w-full mb-8">
                            <span class="text-[#6b7c32] text-2xl font-extrabold flex items-center gap-2">🫒 زيت الذهب
                                الأخضر</span>
                            <button id="close-menu" class="text-gray-700 text-3xl focus:outline-none"
                                aria-label="إغلاق القائمة">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <a href="#home"
                            class="flex items-center gap-2 text-gray-800 hover:bg-[#f4d03f] hover:text-[#2c3e30] px-4 py-3 rounded-xl transition-all duration-200 text-xl font-bold w-full"><span>🏠</span>الرئيسية</a>
                        <a href="#features"
                            class="flex items-center gap-2 text-gray-800 hover:bg-[#f4d03f] hover:text-[#2c3e30] px-4 py-3 rounded-xl transition-all duration-200 text-xl font-bold w-full"><span>✨</span>المميزات</a>
                        <a href="#product"
                            class="flex items-center gap-2 text-gray-800 hover:bg-[#f4d03f] hover:text-[#2c3e30] px-4 py-3 rounded-xl transition-all duration-200 text-xl font-bold w-full"><span>🫒</span>المنتج</a>
                        <a href="#testimonials"
                            class="flex items-center gap-2 text-gray-800 hover:bg-[#f4d03f] hover:text-[#2c3e30] px-4 py-3 rounded-xl transition-all duration-200 text-xl font-bold w-full"><span>💬</span>آراء
                            العملاء</a>
                        <a href="#order"
                            class="flex items-center gap-2 text-gray-800 hover:bg-[#f4d03f] hover:text-[#2c3e30] px-4 py-3 rounded-xl transition-all duration-200 text-xl font-bold w-full"><span>🛒</span>اطلب
                            الآن</a>
                    </div>
                </nav>
            </div>
        </div>
    </header>
    <script>
        // Navbar mobile menu logic
        const navbarToggle = document.getElementById('navbar-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMenu = document.getElementById('close-menu');
        // Open mobile menu
        navbarToggle.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-full');
            document.body.style.overflow = 'hidden';
        });
        // Close mobile menu
        closeMenu.addEventListener('click', () => {
            mobileMenu.classList.add('translate-x-full');
            document.body.style.overflow = '';
        });
        // Close menu on link click
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('translate-x-full');
                document.body.style.overflow = '';
            });
        });
    </script>

    <!-- Hero Section -->
    <section id="home"
        class="relative py-[120px] md:py-[100px] lg:py-[80px] text-center overflow-hidden bg-gradient-to-br from-[#1a2e05] via-[#2d5016] to-[#3d6b1f]">
        <div class="absolute inset-0 opacity-30 z-0"
            style="background: url('data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><defs><pattern id=\'grain\' width=\'100\' height=\'100\' patternUnits=\'userSpaceOnUse\'><circle cx=\'20\' cy=\'20\' r=\'1\' fill=\'rgba(255,255,255,0.1)\'/><circle cx=\'80\' cy=\'40\' r=\'1\' fill=\'rgba(255,255,255,0.1)\'/><circle cx=\'40\' cy=\'80\' r=\'1\' fill=\'rgba(255,255,255,0.1)\'/></pattern></defs><rect width=\'100\' height=\'100\' fill=\'url(%23grain)\'/></svg>') repeat;">
        </div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="relative z-10 animate__animated animate__fadeInUp">
                <h1
                    class="text-4xl md:text-5xl lg:text-6xl font-extrabold mb-4 bg-gradient-to-r from-[#f4d03f] to-[#f7dc6f] bg-clip-text text-transparent">
                    زيت الذهب الأخضر الطبيعي
                </h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto text-gray-200">
                    اكتشف سر الصحة والطعم الأصيل مع أجود أنواع زيت الزيتون البكر الممتاز، مستخرج من أفضل الزيتون الطبيعي
                    بطرق تقليدية محافظة على كامل فوائده الغذائية
                </p>
                <a href="#order"
                    class="bg-gradient-to-r from-[#f4d03f] to-[#f7dc6f] text-[#2c3e30] py-3 px-8 rounded-full text-lg font-bold transition-all duration-300 inline-block shadow-lg hover:shadow-2xl hover:scale-105">
                    اطلب الآن - خصم 40%
                </a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-[100px] bg-gradient-to-r from-[#2784e2] to-[#e9ecef] text-[#2c3e30]">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12">
                لماذا زيت الذهب الأخضر؟
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        🌿
                    </div>
                    <h3 class="text-xl font-semibold mb-2">طبيعي 100%</h3>
                    <p class="text-gray-700">
                        مستخرج من زيتون طبيعي بدون مواد كيميائية أو مبيدات حشرية، محافظ على كامل قيمته الغذائية ونكهته
                        الأصيلة
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        ❤️
                    </div>
                    <h3 class="text-xl font-semibold mb-2">مفيد للقلب</h3>
                    <p class="text-gray-700">
                        غني بالأحماض الدهنية الأحادية غير المشبعة والمضادات الطبيعية للأكسدة التي تحمي القلب وتحسن
                        الدورة الدموية
                    </p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        🥗
                    </div>
                    <h3 class="text-xl font-semibold mb-2">مثالي للطبخ</h3>
                    <p class="text-gray-700">
                        طعم مميز ونكهة غنية تضفي على أطباقك مذاقاً لا يُقاوم، مناسب للسلطات والطبخ والتحمير
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Product Section -->
    <section id="product" class="py-[100px] bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="text-center md:text-left">
                    <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold mb-4">
                        زيت الزيتون البكر الممتاز
                    </h2>
                    <p class="text-lg md:text-xl mb-6 text-gray-200">
                        منتج طبيعي 100% مستخرج من أجود أنواع الزيتون المزروع في بساتين البحر المتوسط، معصور على البارد
                        للحفاظ على كامل خصائصه الغذائية والطبيعية.
                    </p>

                    <div class="bg-white bg-opacity-10 p-6 rounded-lg mb-6">
                        <div class="text-xl font-semibold mb-2">
                            السعر الأصلي: <span class="line-through text-red-400">200 جنيه</span>
                        </div>
                        <div class="text-3xl font-extrabold text-yellow-300 mb-2">
                            120 جنيه فقط
                        </div>
                        <div class="bg-red-500 text-white py-2 px-4 rounded-full inline-block font-semibold">
                            توفر 40%
                        </div>
                    </div>

                    <a href="#order"
                        class="bg-gradient-to-r from-[#f4d03f] to-[#f7dc6f] text-[#2c3e30] py-3 px-8 rounded-full text-lg font-bold transition-all duration-300 inline-block shadow-lg hover:shadow-2xl hover:scale-105">
                        اطلب الآن
                    </a>
                </div>
                <div class="text-center relative flex flex-col items-center justify-center">
                    <span class="text-[12rem] inline-block animate-float relative z-10">
                        🫒
                    </span>
                    <span
                        class="absolute left-1/2 -translate-x-1/2 bottom-6 w-32 h-8 bg-black/20 rounded-full blur-md z-0"></span>
                </div>
            </div>
        </div>
    </section>
    <style>
        /* حركة طفو الزيتونة */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-40px);
            }
        }

        .animate-float {
            animation: float 2.5s ease-in-out infinite;
        }

        /* وميض خط التايم لاين */
        @keyframes timeline-glow {

            0%,
            100% {
                box-shadow: 0 0 20px 0 #f4d03f44;
            }

            50% {
                box-shadow: 0 0 40px 8px #f4d03f99;
            }
        }

        .animate-timeline-glow {
            animation: timeline-glow 2.5s ease-in-out infinite;
        }

        /* تمييز النقطة النشطة */
        .timeline-point.active {
            border-color: #f4d03f !important;
            box-shadow: 0 0 0 8px #f4d03f33, 0 2px 16px #f4d03f55;
        }

        /* إظهار نبض للنقطة النشطة */
        .timeline-point.active .animate-pulse {
            display: block !important;
        }
    </style>

    <!-- Testimonials Section -->
    <section id="testimonials" class="py-[100px] bg-[#f8f9fa]">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12">
                ماذا يقول عملاؤنا
            </h2>
            <div id="testimonials-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- سيتم تعبئة التقييمات ديناميكياً -->
            </div>
        </div>
    </section>

    <!-- Guarantees Section -->
    <section class="py-[100px] text-[#34873] bg-gradient-to-r from-[#2c3e30] to-[#34495e]">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-12">
                ضماناتنا لك
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                <div
                    class="bg-white bg-opacity-10 p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        ✅
                    </div>
                    <h3 class="text-xl font-semibold mb-2">ضمان الجودة</h3>
                    <p class="text-gray-600">
                        منتج طبيعي 100% مع ضمان استرداد المال خلال 30 يوم
                    </p>
                </div>
                <div
                    class="bg-white bg-opacity-10 p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        🚚
                    </div>
                    <h3 class="text-xl font-semibold mb-2">توصيل مجاني</h3>
                    <p class="text-gray-600">
                        توصيل مجاني لجميع أنحاء الجمهورية خلال 2-3 أيام عمل
                    </p>
                </div>
                <div
                    class="bg-white bg-opacity-10 p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        🔒
                    </div>
                    <h3 class="text-xl font-semibold mb-2">أمان الدفع</h3>
                    <p class="text-gray-600">
                        دفع آمن عند الاستلام
                    </p>
                </div>
                <div
                    class="bg-white bg-opacity-10 p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
                    <div class="text-4xl mb-4">
                        📞
                    </div>
                    <h3 class="text-xl font-semibold mb-2">دعم العملاء</h3>
                    <p class="text-gray-600">
                        خدمة عملاء متاحة 24/7 للرد على جميع استفساراتكم
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Order Form Section -->
    <section id="order" class="py-[100px] bg-gradient-to-r from-[#f4d03f] to-[#f7dc6f]">
        <div class="container mx-auto px-4">
            <div class="bg-white p-8 rounded-lg shadow-lg max-w-xl mx-auto">
                <h2 class="text-2xl md:text-3xl font-bold text-center mb-8">
                    اطلب الآن واحصل على خصم 40%
                </h2>
                <form id="orderForm">
                    <div class="mb-4">
                        <label for="name" class="block text-gray-700 font-semibold mb-2">الاسم الكامل *</label>
                        <input type="text" id="name" name="name" required
                            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#6b7c32]">
                    </div>

                    <div class="mb-4">
                        <label for="phone" class="block text-gray-700 font-semibold mb-2">رقم الهاتف *</label>
                        <input type="tel" id="phone" name="phone" required
                            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#6b7c32]">
                    </div>

                    <div class="mb-4">
                        <label for="address" class="block text-gray-700 font-semibold mb-2">العنوان بالتفصيل *</label>
                        <textarea id="address" name="address" rows="3" required
                            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#6b7c32]"></textarea>
                    </div>

                    <div class="mb-4">
                        <label for="city" class="block text-gray-700 font-semibold mb-2">المحافظة *</label>
                        <select id="city" name="city" required
                            class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#6b7c32]">
                            <option value="">اختر المحافظة</option>
                            <option value="cairo">القاهرة</option>
                            <option value="giza">الجيزة</option>
                            <option value="alexandria">الإسكندرية</option>
                            <option value="sharkia">الشرقية</option>
                            <option value="beheira">البحيرة</option>
                            <option value="dakahlia">الدقهلية</option>
                            <option value="other">أخرى</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-gray-700 font-semibold mb-2">اختر الكمية:</label>
                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            <div class="bg-[#f8f9fa] p-4 rounded-lg text-center cursor-pointer transition-all duration-300 border-2 border-transparent hover:border-[#6b7c32] hover:bg-[#6b7c32] hover:text-white quantity-option"
                                data-quantity="1" data-price="120">
                                <div class="text-lg font-bold mb-2">
                                    عبوة واحدة
                                </div>
                                <div class="text-gray-700">
                                    120 جنيه
                                </div>
                            </div>
                            <div class="bg-[#f8f9fa] p-4 rounded-lg text-center cursor-pointer transition-all duration-300 border-2 border-transparent hover:border-[#6b7c32] hover:bg-[#6b7c32] hover:text-white quantity-option"
                                data-quantity="2" data-price="200">
                                <div class="text-lg font-bold mb-2">
                                    عبوتان
                                </div>
                                <div class="text-gray-700">
                                    200 جنيه
                                </div>
                                <div class="text-red-500 text-sm font-semibold">
                                    وفر 40 جنيه
                                </div>
                            </div>
                            <div class="bg-[#f8f9fa] p-4 rounded-lg text-center cursor-pointer transition-all duration-300 border-2 border-transparent hover:border-[#6b7c32] hover:bg-[#6b7c32] hover:text-white quantity-option"
                                data-quantity="3" data-price="270">
                                <div class="text-lg font-bold mb-2">
                                    3 عبوات
                                </div>
                                <div class="text-gray-700">
                                    270 جنيه
                                </div>
                                <div class="text-red-500 text-sm font-semibold">
                                    وفر 90 جنيه
                                </div>
                            </div>
                            <div class="bg-[#f8f9fa] p-4 rounded-lg text-center cursor-pointer transition-all duration-300 border-2 border-transparent hover:border-[#6b7c32] hover:bg-[#6b7c32] hover:text-white quantity-option"
                                data-quantity="4" data-price="320">
                                <div class="text-lg font-bold mb-2">
                                    4 عبوات
                                </div>
                                <div class="text-gray-700">
                                    320 جنيه
                                </div>
                                <div class="text-red-500 text-sm font-semibold">
                                    وفر 160 جنيه
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="selectedQuantity" name="selectedQuantity" value="">
                        <input type="hidden" id="selectedPrice" name="selectedPrice" value="">

                    </div>
                    <button type="submit"
                        class="bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-3 px-8 rounded-full text-lg font-bold transition-all duration-300 w-full shadow-lg hover:shadow-2xl hover:scale-105">
                        إرسال الطلب
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- Order Status Modal -->
    <div id="orders-modal" class="fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl p-8 relative">
            <button id="close-orders"
                class="sm:absolute fixed sm:left-4 left-10 w-10 h-10  bg-[#566] rounded-full sm:top-4 text-2xl text-white hover:text-red-500">&times;</button>
            <h3 class="text-2xl font-bold mb-6 text-[#6b7c32] flex items-center gap-2">
                <span>🛒</span> متابعة حالة الطلبات
            </h3>
            <div id="orders-list" class="space-y-4 min-h-[120px] text-right"></div>
        </div>
    </div>
    <script>
        // فتح وغلق مودال الطلبات
        const ordersModal = document.getElementById('orders-modal');
        document.getElementById('close-orders').onclick = () => ordersModal.classList.add('hidden');

        // زر فتح المودال بعد فورم الطلب
        const orderSection = document.getElementById('order');
        if (orderSection) {
            const btn = document.createElement('button');
            btn.id = 'open-orders';
            btn.innerHTML = '<span class="mr-2">📦</span>متابعة حالة الطلبات';
            btn.className = 'mt-8 mb-4 bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-3 px-8 rounded-full text-lg font-bold transition-all duration-300 shadow-lg hover:shadow-2xl hover:scale-105 flex items-center gap-2 mx-auto';
            btn.style.display = 'block';
            orderSection.querySelector('.max-w-xl').appendChild(btn);
            btn.onclick = async function () {
                // تحقق من الصلاحية
                try {
                    const res = await fetch('https://olive-oil-store-api.vercel.app/api/user/check', { credentials: 'include' });
                    if (res.ok) {
                        ordersModal.classList.remove('hidden');
                        loadOrders();
                    } else {
                        document.getElementById('auth-modal').classList.remove('hidden');
                    }
                } catch {
                    document.getElementById('auth-modal').classList.remove('hidden');
                }
            };
        }
        // جلب الطلبات وعرضها في مودال مع شريط جانبي
        async function loadOrders() {
            const ordersList = document.getElementById('orders-list');
            ordersList.innerHTML = '<div class="text-center text-gray-500 py-8">جاري تحميل الطلبات...</div>';
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/order/myorders', { credentials: 'include' });
                const orders = await res.json();
                if (Array.isArray(orders) && orders.length > 0) {
                    // بناء الشريط الجانبي وقسم التفاصيل
                    let sidebar = `<div id="orders-sidebar" class="w-full md:w-1/3 max-h-[400px] overflow-y-auto border-l md:border-l-0 md:border-r border-gray-200 pr-2 md:pr-0 md:pl-2 flex-shrink-0 bg-[#f8f9fa] rounded-lg mb-4 md:mb-0">`;
                    sidebar += orders.map((o, i) => `
        <div class="order-item cursor-pointer p-3 rounded-lg mb-2 flex items-center gap-2 transition hover:bg-[#e9ecef] ${i === 0 ? 'bg-[#e9ecef]' : ''}" data-index="${i}">
          <span class="text-[#6b7c32] font-bold">${o._id.slice(-6).toUpperCase()}</span>
          <span class="text-xs px-2 py-1 rounded-full ${getStatusColor(o.status)}">${o.status || 'قيد التنفيذ'}</span>
        </div>
      `).join('') + '</div>';
                    let details = `<div id="order-details" class="flex-1">${renderOrderTimeline(orders[0])}</div>`;
                    ordersList.innerHTML = `<div class="flex flex-col md:flex-row gap-4">${sidebar}${details}</div>`;
                    // تفعيل التبديل بين الطلبات
                    document.querySelectorAll('.order-item').forEach(item => {
                        item.onclick = function () {
                            document.querySelectorAll('.order-item').forEach(i => i.classList.remove('bg-[#e9ecef]'));
                            this.classList.add('bg-[#e9ecef]');
                            const idx = +this.getAttribute('data-index');
                            document.getElementById('order-details').innerHTML = renderOrderTimeline(orders[idx]);
                        };
                    });
                } else {
                    ordersList.innerHTML = '<div class="text-center text-gray-500 py-8">لا توجد طلبات بعد.</div>';
                }
            } catch {
                ordersList.innerHTML = '<div class="text-center text-red-500 py-8">تعذر تحميل الطلبات.</div>';
            }
        }
        function getStatusColor(status) {
            if (status === 'تم التسليم' || status === 'تم التوصيل') return 'bg-green-100 text-green-700';
            if (status === 'جاري التوصيل') return 'bg-yellow-100 text-yellow-700';
            if (status === 'جاري التجهيز') return 'bg-blue-100 text-blue-700';
            return 'bg-gray-200 text-gray-700';
        }
        // رسم خط زمني لحالة الطلب
        function renderOrderTimeline(order) {
            // مراحل الطلب
            const steps = [
                { label: 'تم القبول', icon: '✅' },
                { label: 'جاري التجهيز', icon: '🛒' },
                { label: 'جاري التوصيل', icon: '🚚' },
                { label: 'تم التسليم', icon: '📦' }
            ];
            // تحديد المرحلة الحالية بناءً على order.status
            let currentStep = 0;
            if (order.status === 'جاري التجهيز') currentStep = 1;
            else if (order.status === 'جاري التوصيل') currentStep = 2;
            else if (order.status === 'تم التسليم' || order.status === 'تم التوصيل') currentStep = 3;
            // بناء الخط الزمني
            const timeline = `
    <div class="flex flex-col md:flex-row items-center gap-4 md:gap-8 py-2">
      ${steps.map((step, i) => `
        <div class="flex flex-col items-center flex-1">
          <div class="w-10 h-10 flex items-center justify-center rounded-full text-2xl font-bold ${i < currentStep ? 'bg-green-200 text-green-700' : i === currentStep ? 'bg-yellow-300 text-yellow-900 border-2 border-yellow-500' : 'bg-gray-200 text-gray-400'}">
            ${step.icon}
          </div>
          <div class="mt-2 text-xs md:text-sm font-bold ${i === currentStep ? 'text-yellow-700' : i < currentStep ? 'text-green-700' : 'text-gray-400'}">${step.label}</div>
        </div>
        ${i < steps.length - 1 ? `<div class="flex-1 h-1 ${i < currentStep ? 'bg-green-400' : 'bg-gray-200'}"></div>` : ''}
      `).join('')}
    </div>
  `;
            return `
    <div class="bg-[#f8f9fa] rounded-lg p-4 shadow border-r-4 ${currentStep === 3 ? 'border-green-500' : currentStep === 2 ? 'border-yellow-400' : 'border-gray-400'} mb-2">
      <div class="font-bold text-lg text-[#6b7c32] flex items-center gap-2">طلب رقم: <span class="text-[#f4d03f]">${order._id.slice(-6).toUpperCase()}</span>
        </div>
      <div class="text-gray-700 mt-1">${order.address} - ${order.city}</div>
      <div class="text-gray-500 text-sm mt-1">بتاريخ: ${new Date(order.createdAt).toLocaleDateString('ar-EG')}</div>
        <div class="text-gray-600 text-sm mt-1">السعر: <span class="text-[#f4d03f]">${order.price} جنيه</span></div>
      <div class="text-gray-600 text-sm">الكمية: ${order.quantity}</div>
      ${timeline}
    </div>
  `;
        }
        // Close modal when clicking outside of it
        window.addEventListener('click', function (event) {
            if (event.target === ordersModal) {
                ordersModal.classList.add('hidden');
            }
        });
    </script>
    <style>
        /* حركة طفو الزيتونة */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-40px);
            }
        }

        .animate-float {
            animation: float 2.5s ease-in-out infinite;
        }

        /* وميض خط التايم لاين */
        @keyframes timeline-glow {

            0%,
            100% {
                box-shadow: 0 0 20px 0 #f4d03f44;
            }

            50% {
                box-shadow: 0 0 40px 8px #f4d03f99;
            }
        }

        .animate-timeline-glow {
            animation: timeline-glow 2.5s ease-in-out infinite;
        }

        /* تمييز النقطة النشطة */
        .timeline-point.active {
            border-color: #f4d03f !important;
            box-shadow: 0 0 0 8px #f4d03f33, 0 2px 16px #f4d03f55;
        }

        /* إظهار نبض للنقطة النشطة */
        .timeline-point.active .animate-pulse {
            display: block !important;
        }

        @media (max-width: 768px) {
            #orders-modal .flex.md\:flex-row {
                flex-direction: column !important;
            }

            #orders-sidebar {
                width: 100% !important;
                max-width: 100% !important;
                margin-bottom: 1rem;
                border: none !important;
                border-bottom: 1px solid #e5e7eb !important;
                border-radius: 0.75rem 0.75rem 0 0 !important;
            }

            #order-details {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto;
            }

            #orders-modal .bg-white {
                padding: 0.5rem !important;
            }

            #orders-modal .font-bold,
            #orders-modal .text-lg {
                font-size: 1rem !important;
            }
        }
    </style>


    <!-- Timeline Navigation -->
    <!-- التايم لاين الجانبي: يظهر على جميع الشاشات (يمكنك تعديله ليظهر فقط على الشاشات الكبيرة بإضافة كلاس hidden lg:block) -->
    <div class="fixed top-1/2 sm:left-10 left-1  transform -translate-y-1/2 z-50 pointer-events-none">
        <!-- خط التايم لاين المتدرج مع وميض -->
        <div
            class="w-1 h-[420px] bg-gradient-to-b from-[#6b7c32] via-[#f4d03f] to-[#6b7c32] rounded-md absolute left-1/2 top-0 transform -translate-x-1/2 opacity-70 animate-timeline-glow">
        </div>
        <!-- نقاط التايم لاين -->
        <div class="flex flex-col items-center gap-10 relative z-10">
            <!-- نقطة: الرئيسية -->
            <div class="timeline-point group w-7 h-7 bg-white border-4 border-[#6b7c32] rounded-full shadow-xl transition-all duration-300 pointer-events-auto cursor-pointer flex items-center justify-center relative hover:scale-110 hover:border-[#f4d03f]"
                data-target="#home" title="الرئيسية">
                <!-- Tooltip -->
                <span
                    class="absolute left-1/2 top-full mt-2 -translate-x-1/2 bg-[#2c3e30] text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap">الرئيسية</span>
                <!-- أيقونة -->
                <span class="text-xl">🏠</span>
                <!-- نبض للنقطة النشطة -->
                <span class="absolute w-12 h-12 rounded-full bg-yellow-300 opacity-30 animate-pulse -z-10"
                    style="display:none;"></span>
            </div>
            <!-- نقطة: المميزات -->
            <div class="timeline-point group w-7 h-7 bg-white border-4 border-[#6b7c32] rounded-full shadow-xl transition-all duration-300 pointer-events-auto cursor-pointer flex items-center justify-center relative hover:scale-110 hover:border-[#f4d03f]"
                data-target="#features" title="المميزات">
                <span
                    class="absolute left-1/2 top-full mt-2 -translate-x-1/2 bg-[#2c3e30] text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap">المميزات</span>
                <span class="text-xl">✨</span>
            </div>
            <!-- نقطة: المنتج -->
            <div class="timeline-point group w-7 h-7 bg-white border-4 border-[#6b7c32] rounded-full shadow-xl transition-all duration-300 pointer-events-auto cursor-pointer flex items-center justify-center relative hover:scale-110 hover:border-[#f4d03f]"
                data-target="#product" title="المنتج">
                <span
                    class="absolute left-1/2 top-full mt-2 -translate-x-1/2 bg-[#2c3e30] text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap">المنتج</span>
                <span class="text-xl">🫒</span>
            </div>
            <!-- نقطة: آراء العملاء -->
            <div class="timeline-point group w-7 h-7 bg-white border-4 border-[#6b7c32] rounded-full shadow-xl transition-all duration-300 pointer-events-auto cursor-pointer flex items-center justify-center relative hover:scale-110 hover:border-[#f4d03f]"
                data-target="#testimonials" title="آراء العملاء">
                <span
                    class="absolute left-1/2 top-full mt-2 -translate-x-1/2 bg-[#2c3e30] text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap">آراء
                    العملاء</span>
                <span class="text-xl">💬</span>
            </div>
            <!-- نقطة: اطلب الآن -->
            <div class="timeline-point group w-7 h-7 bg-white border-4 border-[#6b7c32] rounded-full shadow-xl transition-all duration-300 pointer-events-auto cursor-pointer flex items-center justify-center relative hover:scale-110 hover:border-[#f4d03f]"
                data-target="#order" title="اطلب الآن">
                <span
                    class="absolute left-1/2 top-full mt-2 -translate-x-1/2 bg-[#2c3e30] text-white text-xs rounded px-2 py-1 opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap">اطلب
                    الآن</span>
                <span class="text-xl">🛒</span>
            </div>
        </div>
    </div>
    <script>

        document.querySelectorAll('.quantity-option').forEach(option => {
            option.addEventListener('click', function () {

                document.querySelectorAll('.quantity-option').forEach(opt => {
                    opt.classList.remove('border-[#6b7c32]', 'bg-[#6b7c32]', 'text-white');
                    opt.classList.add('bg-[#f8f9fa]');
                });

                this.classList.remove('bg-[#f8f9fa]');
                this.classList.add('border-[#6b7c32]', 'bg-[#6b7c32]', 'text-white');

                document.getElementById('selectedQuantity').value = this.getAttribute('data-quantity');
                document.getElementById('selectedPrice').value = this.getAttribute('data-price');

            });
        });


        // Timeline scroll effect
        const sections = [
            document.getElementById('home'),
            document.getElementById('features'),
            document.getElementById('product'),
            document.getElementById('testimonials'),
            document.getElementById('order')
        ];
        const timelinePoints = document.querySelectorAll('.timeline-point');
        function activateTimelinePoint() {
            let index = 0;
            const scrollY = window.scrollY + window.innerHeight / 3;
            for (let i = 0; i < sections.length; i++) {
                if (sections[i].offsetTop <= scrollY) {
                    index = i;
                }
            }
            timelinePoints.forEach((point, i) => {
                if (i === index) point.classList.add('active');
                else point.classList.remove('active');
            });
        }
        window.addEventListener('scroll', activateTimelinePoint);
        activateTimelinePoint();
        // Click to scroll
        timelinePoints.forEach((point, i) => {
            point.addEventListener('click', function (e) {
                e.preventDefault();
                const target = sections[i];
                window.scrollTo({
                    top: target.offsetTop - 60,
                    behavior: 'smooth'
                });
            });
        });
        // أضف أيقونة متحركة للنقطة النشطة
        function updateTimelineActive() {
            const points = document.querySelectorAll('.timeline-point');
            points.forEach((point, i) => {
                if (point.classList.contains('active')) {
                    point.querySelector('.animate-pulse')?.style.setProperty('display', 'block');
                } else {
                    point.querySelector('.animate-pulse')?.style.setProperty('display', 'none');
                }
            });
        }
        window.addEventListener('scroll', updateTimelineActive);
        updateTimelineActive();
    </script>
    <script>
        // إرسال بيانات الفورم للـ API عند الإرسال
        document.getElementById('orderForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const form = e.target;
            // const data = {
            //     name: form.name.value,
            //     phone: form.phone.value,
            //     address: form.address.value,
            //     city: form.city.value,
            //     quantity: form.selectedQuantity.value,
            //     price:  
            // };
            const data = Object.fromEntries(new FormData(this));
            const orderMsg = document.getElementById('orderMsg');
            function showOrderMsg(text, success = true) {
                orderMsg.textContent = text;
                orderMsg.className = 'fixed top-8 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 rounded-lg shadow-lg text-lg font-bold ' + (success ? 'bg-green-600 text-white' : 'bg-red-600 text-white');
                orderMsg.style.display = 'block';
                setTimeout(() => { orderMsg.style.display = 'none'; }, 2000);
            }
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(data)
                });
                if (res.ok) {
                    showOrderMsg('تم إرسال طلبك بنجاح! سنقوم بالتواصل معك قريباً.', true);
                    form.reset();
                } else {
                    const errorText = await res.text();
                    showOrderMsg('حدث خطأ أثناء إرسال الطلب: ' + errorText, false);
                }
            } catch (err) {
                showOrderMsg('تعذر الاتصال بالخادم. تحقق من اتصالك بالإنترنت.', false);
            }
        });
    </script>

    <!-- User Auth Modals -->
    <div id="auth-modal" class="fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative">
            <button id="close-auth"
                class="absolute left-4 top-4 text-2xl text-gray-400 hover:text-red-500">&times;</button>
            <div id="auth-tabs" class="flex mb-6 border-b">
                <button id="show-register"
                    class="flex-1 py-2 text-lg font-bold border-b-2 border-[#6b7c32] text-[#6b7c32]">تسجيل جديد</button>
                <button id="show-login" class="flex-1 py-2 text-lg font-bold text-gray-500">تسجيل دخول</button>
            </div>
            <!-- Register Form -->
            <form id="registerForm" class="space-y-4">
                <input type="text" name="name" placeholder="الاسم الكامل" required class="w-full p-3 border rounded-lg">
                <input type="email" name="email" placeholder="البريد الإلكتروني" required
                    class="w-full p-3 border rounded-lg">
                <input type="password" name="password" placeholder="كلمة المرور" required
                    class="w-full p-3 border rounded-lg">
                <button type="submit"
                    class="w-full bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-3 rounded-lg font-bold hover:scale-105 transition">تسجيل
                    جديد</button>
                <div id="registerMsg" class="text-center text-sm mt-2"></div>
            </form>
            <!-- Login Form -->
            <form id="loginForm" class="space-y-4 hidden">
                <input type="email" name="email" placeholder="البريد الإلكتروني" required
                    class="w-full p-3 border rounded-lg">
                <input type="password" name="password" placeholder="كلمة المرور" required
                    class="w-full p-3 border rounded-lg">
                <button type="submit"
                    class="w-full bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-3 rounded-lg font-bold hover:scale-105 transition">تسجيل
                    دخول</button>
                <div id="loginMsg" class="text-center text-sm mt-2"></div>
            </form>
        </div>
    </div>
    <!-- زر فتح المودال -->
    <button id="open-auth"
        class="fixed bottom-6 left-6 z-[9999] bg-[#6b7c32] text-white px-6 py-3 rounded-full shadow-lg font-bold hover:bg-[#8ba446] transition">تسجيل
        / دخول</button>
    <script>
        // فتح وغلق المودال
        const authModal = document.getElementById('auth-modal');
        document.getElementById('open-auth').onclick = () => authModal.classList.remove('hidden');
        document.getElementById('close-auth').onclick = () => authModal.classList.add('hidden');
        // التبديل بين التبويبات
        const showRegister = document.getElementById('show-register');
        const showLogin = document.getElementById('show-login');
        const registerForm = document.getElementById('registerForm');
        const loginForm = document.getElementById('loginForm');
        showRegister.onclick = () => {
            showRegister.classList.add('border-b-2', 'border-[#6b7c32]', 'text-[#6b7c32]');
            showLogin.classList.remove('border-b-2', 'border-[#6b7c32]', 'text-[#6b7c32]');
            showLogin.classList.add('text-gray-500');
            registerForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
        };
        showLogin.onclick = () => {
            showLogin.classList.add('border-b-2', 'border-[#6b7c32]', 'text-[#6b7c32]');
            showRegister.classList.remove('border-b-2', 'border-[#6b7c32]', 'text-[#6b7c32]');
            showRegister.classList.add('text-gray-500');
            loginForm.classList.remove('hidden');
            registerForm.classList.add('hidden');
        };
        // إرسال فورم التسجيل
        registerForm.onsubmit = async function (e) {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(this));
            const msg = document.getElementById('registerMsg');
            msg.textContent = 'جاري التسجيل...';
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/user/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (res.ok) {
                    msg.textContent = 'تم التسجيل بنجاح! يمكنك تسجيل الدخول الآن.';
                    msg.className = 'text-green-600 text-center mt-2';
                    this.reset();
                } else {
                    msg.textContent = result.message || 'حدث خطأ.';
                    msg.className = 'text-red-600 text-center mt-2';
                }
            } catch {
                msg.textContent = 'تعذر الاتصال بالخادم.';
                msg.className = 'text-red-600 text-center mt-2';
            }
        };
        // إرسال فورم تسجيل الدخول
        loginForm.onsubmit = async function (e) {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(this));
            const msg = document.getElementById('loginMsg');
            msg.textContent = 'جاري تسجيل الدخول...';
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/user/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data),
                    credentials: 'include'
                });
                const result = await res.json();
                if (res.ok) {
                    msg.textContent = 'تم تسجيل الدخول بنجاح!';
                    msg.className = 'text-green-600 text-center mt-2';
                    this.reset();
                    setTimeout(() => authModal.classList.add('hidden'), 1000);
                } else {
                    msg.textContent = result.message || 'حدث خطأ.';
                    msg.className = 'text-red-600 text-center mt-2';
                }
            } catch {
                msg.textContent = 'تعذر الاتصال بالخادم.';
                msg.className = 'text-red-600 text-center mt-2';
            }
        };
    </script>
    <div id="orderMsg"
        class="fixed top-8 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 rounded-lg shadow-lg text-lg font-bold hidden">
    </div>
    <script>
        // إخفاء زر تسجيل / دخول إذا كان المستخدم مسجل الدخول
        async function checkAuthAndToggleUI() {
            const authBtn = document.getElementById('open-auth');
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/user/check', {
                    credentials: 'include'
                });
                if (res.ok) {
                    // المستخدم مسجل الدخول
                    if (authBtn) authBtn.style.display = 'none';
                    window.isUserAuthenticated = true;
                } else {
                    if (authBtn) authBtn.style.display = '';
                    window.isUserAuthenticated = false;
                }
            } catch {
                if (authBtn) authBtn.style.display = '';
                window.isUserAuthenticated = false;
            }
        }
        checkAuthAndToggleUI();

        // منع إرسال الطلب إذا لم يكن المستخدم مسجل الدخول
        const orderForm = document.getElementById('orderForm');
        if (orderForm) {
            orderForm.addEventListener('submit', async function (e) {
                if (!window.isUserAuthenticated) {
                    e.preventDefault();
                    document.getElementById('auth-modal').classList.remove('hidden');
                    return;
                }
                // ...existing code for order submission...
            }, true);
        }
    </script>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-8 mt-16 text-center relative">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-4 px-4">
            <div class="text-lg font-bold">جميع الحقوق محفوظة &copy; زيت الذهب الأخضر 2024</div>
            <button id="open-review"
                class="bg-white text-[#6b7c32] font-bold px-6 py-3 rounded-full shadow-lg hover:bg-[#f4d03f] hover:text-[#2c3e30] transition">قيّم
                تجربتك ⭐</button>
        </div>
    </footer>
    <!-- Review Modal -->
    <div id="review-modal" class="fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center hidden">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-8 relative">
            <button id="close-review"
                class="absolute left-4 top-4 text-2xl text-gray-400 hover:text-red-500">&times;</button>
            <h3 class="text-2xl font-bold mb-4 text-[#6b7c32]">قيّم تجربتك معنا</h3>
            <form id="reviewForm" class="space-y-4">
                <div>
                    <label class="block mb-2 font-semibold">التقييم (من 1 إلى 5):</label>
                    <select name="rating" required class="w-full p-3 border rounded-lg">
                        <option value="">اختر التقييم</option>
                        <option value="5">⭐⭐⭐⭐⭐ ممتاز</option>
                        <option value="4">⭐⭐⭐⭐ جيد جداً</option>
                        <option value="3">⭐⭐⭐ جيد</option>
                        <option value="2">⭐⭐ مقبول</option>
                        <option value="1">⭐ ضعيف</option>
                    </select>
                </div>
                <div>
                    <label class="block mb-2 font-semibold">تعليقك (اختياري):</label>
                    <textarea name="comment" rows="3" class="w-full p-3 border rounded-lg"></textarea>
                </div>
                <button type="submit"
                    class="w-full bg-gradient-to-r from-[#6b7c32] to-[#8ba446] text-white py-3 rounded-lg font-bold hover:scale-105 transition">إرسال
                    التقييم</button>
                <div id="reviewMsg" class="text-center text-sm mt-2"></div>
            </form>
        </div>
    </div>
    <script>
        // فتح وغلق مودال التقييم
        const reviewModal = document.getElementById('review-modal');
        document.getElementById('open-review').onclick = async function () {
            // تحقق من الصلاحية قبل عرض فورم التقييم
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/user/check', { credentials: 'include' });
                if (res.ok) {
                    reviewModal.classList.remove('hidden');
                } else {
                    document.getElementById('auth-modal').classList.remove('hidden');
                }
            } catch {
                document.getElementById('auth-modal').classList.remove('hidden');
            }
        };
        document.getElementById('close-review').onclick = () => reviewModal.classList.add('hidden');
        // إرسال فورم التقييم
        document.getElementById('reviewForm').onsubmit = async function (e) {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(this));
            const msg = document.getElementById('reviewMsg');
            msg.textContent = 'جاري إرسال التقييم...';
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/review', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(data)
                });
                const result = await res.json();
                if (res.ok) {
                    msg.textContent = 'تم إرسال تقييمك بنجاح! شكراً لمشاركتك.';
                    msg.className = 'text-green-600 text-center mt-2';
                    this.reset();
                    setTimeout(() => reviewModal.classList.add('hidden'), 1200);
                } else {
                    msg.textContent = result.message || 'حدث خطأ.';
                    msg.className = 'text-red-600 text-center mt-2';
                }
            } catch {
                msg.textContent = 'تعذر الاتصال بالخادم.';
                msg.className = 'text-red-600 text-center mt-2';
            }
        };
    </script>
    <script>
        // عرض التقييمات الحقيقية بدلاً من الثابتة
        async function loadReviews() {
            const testimonialsSection = document.getElementById('testimonials-list');
            if (!testimonialsSection) return;
            testimonialsSection.innerHTML = '<div class="text-center text-gray-500 py-8">جاري تحميل التقييمات...</div>';
            try {
                const res = await fetch('https://olive-oil-store-api.vercel.app/api/review');
                const reviews = await res.json();
                if (Array.isArray(reviews) && reviews.length > 0) {
                    testimonialsSection.innerHTML = reviews.map(r => `
        <div class="bg-white p-6 rounded-lg shadow-lg transition-transform transform hover:-translate-y-2">
          <div class="text-yellow-400 text-2xl mb-4">
            ${'⭐'.repeat(r.rating)}
          </div>
          <p class="text-gray-700 mb-4">${r.comment ? r.comment.replace(/</g, '&lt;') : 'بدون تعليق'}</p>
          <div class="font-semibold text-gray-800">- ${r.user?.name || 'مستخدم'}</div>
        </div>
      `).join('');
                } else {
                    testimonialsSection.innerHTML = '<div class="text-center text-gray-500 py-8">لا توجد تقييمات بعد.</div>';
                }
            } catch {
                testimonialsSection.innerHTML = '<div class="text-center text-red-500 py-8">تعذر تحميل التقييمات.</div>';
            }
        }
        loadReviews();
    </script>
</body>

</html>